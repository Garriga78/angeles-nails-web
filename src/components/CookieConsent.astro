---
// Cookie Consent Banner Component
---

<div
    id="cookie-consent"
    class="fixed bottom-6 left-6 z-[200] max-w-sm opacity-0 pointer-events-none transition-all duration-500"
>
    <div class="bg-white rounded-2xl shadow-2xl p-6 border-2 border-gold-200">
        <!-- Cookie Icon -->
        <div class="flex justify-center mb-4">
            <div class="text-6xl">üç™</div>
        </div>

        <!-- Title -->
        <h3
            class="text-2xl font-serif font-bold text-brown-800 text-center mb-3"
        >
            ¬°Cookies!
        </h3>

        <!-- Description -->
        <p class="text-sm text-brown-600 text-center mb-6 leading-relaxed">
            Utilizamos cookies para mejorar tu experiencia de navegaci√≥n y
            analizar el uso de nuestro sitio web.
        </p>

        <!-- Buttons -->
        <div class="flex flex-col gap-3">
            <button
                id="accept-cookies"
                class="w-full bg-brown-800 text-cream-50 px-6 py-3 rounded-full hover:bg-gold-500 hover:text-brown-900 transition-all duration-300 font-medium text-sm"
            >
                Aceptar todas
            </button>
            <div class="flex gap-2">
                <a
                    href="/cookies"
                    class="flex-1 text-center border-2 border-brown-800 text-brown-800 px-4 py-2 rounded-full hover:bg-brown-800 hover:text-cream-50 transition-all duration-300 font-medium text-xs"
                >
                    M√°s info
                </a>
                <button
                    id="reject-cookies"
                    class="flex-1 border-2 border-brown-300 text-brown-600 px-4 py-2 rounded-full hover:bg-brown-100 transition-all duration-300 font-medium text-xs"
                >
                    Solo necesarias
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    // Check if user has already made a choice
    const cookieConsent = localStorage.getItem("cookieConsent");
    const consentBanner = document.getElementById("cookie-consent");
    const acceptBtn = document.getElementById("accept-cookies");
    const rejectBtn = document.getElementById("reject-cookies");

    // Show banner if no consent has been given
    if (!cookieConsent && consentBanner) {
        setTimeout(() => {
            consentBanner.classList.remove("opacity-0", "pointer-events-none");
            consentBanner.classList.add("opacity-100", "pointer-events-auto");
        }, 1000);
    }

    // Accept all cookies
    acceptBtn?.addEventListener("click", () => {
        localStorage.setItem("cookieConsent", "accepted");
        hideBanner();
        // Here you can enable analytics and other cookies
        enableAnalytics();
    });

    // Reject optional cookies (only essential)
    rejectBtn?.addEventListener("click", () => {
        localStorage.setItem("cookieConsent", "essential");
        hideBanner();
    });

    function hideBanner() {
        if (consentBanner) {
            consentBanner.classList.add("opacity-0", "pointer-events-none");
            setTimeout(() => {
                consentBanner.style.display = "none";
            }, 500);
        }
    }

    function enableAnalytics() {
        // Add your analytics code here (Google Analytics, etc.)
        console.log("Analytics enabled");
    }
</script>

<style>
    #cookie-consent {
        animation: slideIn 0.5s ease-out forwards;
    }

    @keyframes slideIn {
        from {
            transform: translateX(-100%);
        }
        to {
            transform: translateX(0);
        }
    }
</style>
