---
export interface Props {
    title: string;
    description: string;
    keywords?: string;
    image?: string;
    type?: "website" | "article" | "profile";
    publishDate?: string;
    canonicalURL?: string;
}

const {
    title,
    description,
    keywords,
    image = "/img/og-default.jpg",
    type = "website",
    publishDate,
    canonicalURL = Astro.url.href,
} = Astro.props;

const siteName = "Angeles Nails Studio";
const siteUrl = Astro.url ? Astro.url.origin : "https://angelesnails.es";
let socialImageURL = "/img/og-default.jpg";

try {
    socialImageURL = new URL(image, siteUrl).href;
} catch (e) {
    console.error("Error generating social image URL", e);
}

// Schema JSON-LD
const schema = {
    "@context": "https://schema.org",
    "@type": type === "article" ? "BlogPosting" : "BeautySalon",
    name: title,
    description: description,
    image: socialImageURL,
    url: canonicalURL,
    ...(type === "article" && publishDate
        ? {
              headline: title,
              datePublished: publishDate,
              author: {
                  "@type": "Person",
                  name: "Angeles Nails Team",
              },
          }
        : {
              telephone: "+34613302914",
              address: {
                  "@type": "PostalAddress",
                  streetAddress: "Plaza Santo Domingo",
                  addressLocality: "Murcia",
                  addressRegion: "Murcia",
                  addressCountry: "ES",
              },
              priceRange: "$$",
              openingHoursSpecification: [
                  {
                      "@type": "OpeningHoursSpecification",
                      dayOfWeek: [
                          "Monday",
                          "Tuesday",
                          "Wednesday",
                          "Thursday",
                          "Friday",
                      ],
                      opens: "10:00",
                      closes: "20:00",
                  },
              ],
          }),
};
---

<!-- SEO Basic -->
<meta name="description" content={description} />
{keywords && <meta name="keywords" content={keywords} />}
<link rel="canonical" href={canonicalURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={socialImageURL} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:site_name" content={siteName} />
<meta property="og:locale" content="es_ES" />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonicalURL} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={socialImageURL} />

<!-- WhatsApp / Telegram -->
<meta property="og:image:alt" content={title} />

<!-- Schema.org JSON-LD -->
<script type="application/ld+json" set:html={JSON.stringify(schema)} />
