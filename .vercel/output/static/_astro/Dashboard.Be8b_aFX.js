import{s as x,j as e}from"./supabase.Cay6IYHa.js";import{r as n}from"./index.D55ewHcJ.js";function w({children:i}){const[m,g]=n.useState(!0),[u,s]=n.useState(!1);return n.useEffect(()=>{(async()=>{const{data:{session:c}}=await x.auth.getSession();c?s(!0):window.location.href="/admin/login",g(!1)})();const{data:{subscription:d}}=x.auth.onAuthStateChange((c,l)=>{l?s(!0):window.location.href="/admin/login"});return()=>d.unsubscribe()},[]),m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gold-500"})}):u?e.jsx(e.Fragment,{children:i}):null}function j({onUpload:i,currentImage:m,bucketName:g="images"}){const[u,s]=n.useState(!1),[o,d]=n.useState(null),c=async l=>{try{if(s(!0),d(null),!l.target.files||l.target.files.length===0)throw new Error("Debe seleccionar una imagen para subir.");const f=l.target.files[0],b=f.name.split(".").pop(),t=`${`${Math.random().toString(36).substring(2)}.${b}`}`,{error:a}=await x.storage.from(g).upload(t,f);if(a)throw a;const{data:r}=x.storage.from(g).getPublicUrl(t);i(r.publicUrl)}catch(f){d(f.message)}finally{s(!1)}};return e.jsxs("div",{className:"space-y-4",children:[m&&e.jsx("div",{className:"relative w-40 h-40 overflow-hidden rounded-lg shadow-md border border-gray-200",children:e.jsx("img",{src:m,alt:"Vista previa",className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:u?"Subiendo...":"Subir imagen"}),e.jsx("input",{type:"file",accept:"image/*",onChange:c,disabled:u,className:`block w-full text-sm text-gray-500\r
            file:mr-4 file:py-2 file:px-4\r
            file:rounded-full file:border-0\r
            file:text-sm file:font-semibold\r
            file:bg-brown-50 file:text-brown-700\r
            hover:file:bg-brown-100`})]}),o&&e.jsx("p",{className:"text-sm text-red-600",children:o})]})}function v({onUpload:i,currentSVG:m}){const[g,u]=n.useState(!1),[s,o]=n.useState(null),d=async c=>{try{if(u(!0),o(null),!c.target.files||c.target.files.length===0)throw new Error("Debes seleccionar un archivo SVG");const l=c.target.files[0];if(!l.type.includes("svg"))throw new Error("El archivo debe ser un SVG");const h=`${`${Math.random()}.svg`}`,{error:t}=await x.storage.from("images").upload(h,l);if(t)throw t;const{data:a}=x.storage.from("images").getPublicUrl(h);i(a.publicUrl)}catch(l){o(l.message),console.error("Error uploading SVG:",l)}finally{u(!1)}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:".svg,image/svg+xml",onChange:d,disabled:g,className:"hidden"}),e.jsx("span",{className:"inline-block bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition-colors border border-gray-300",children:g?"Subiendo...":"Subir SVG"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded border border-gray-200 flex items-center justify-center p-1",children:e.jsx("img",{src:m,alt:"SVG preview",className:"w-full h-full object-contain"})}),e.jsx("span",{className:"text-xs text-gray-500",children:"SVG actual"})]})]}),s&&e.jsx("p",{className:"text-sm text-red-600",children:s})]})}function N(){const[i,m]=n.useState([]),[g,u]=n.useState(!0),[s,o]=n.useState(null),[d,c]=n.useState(!1),[l,f]=n.useState("basic");n.useEffect(()=>{b()},[]),n.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[d]);const b=async()=>{u(!0);const{data:r,error:p}=await x.from("services").select("*").order("display_order",{ascending:!0});p?console.error("Error fetching services:",p):m(r||[]),u(!1)},h=async r=>{if(!confirm("Â¿EstÃ¡s seguro de que quieres eliminar este servicio?"))return;const{error:p}=await x.from("services").delete().eq("id",r);p?(alert("Error eliminando servicio"),console.error(p)):b()},t=async r=>{if(r.preventDefault(),!s)return;!s.slug&&s.title&&(s.slug=s.title.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""));let p;if(s.id){const{error:y}=await x.from("services").update(s).eq("id",s.id);p=y}else{const{error:y}=await x.from("services").insert([s]);p=y}p?(console.error("Error saving service:",p),alert("Error al guardar: "+p.message)):(c(!1),o(null),b())},a=r=>{o(r?{...r}:{title:"",slug:"",category:"manicura",hero_title:"",hero_subtitle:"",hero_image_url:"",intro_title:"",intro_description:"",features_title:"",features_image_url:"",feature_1_title:"",feature_1_description:"",feature_2_title:"",feature_2_description:"",feature_3_title:"",feature_3_description:"",process_title:"Paso a paso",process_step_1_icon:"",process_step_1_title:"",process_step_1_description:"",process_step_2_icon:"",process_step_2_title:"",process_step_2_description:"",process_step_3_icon:"",process_step_3_title:"",process_step_3_description:"",seo_content:"",price:"",duration:"",display_order:0}),f("basic"),c(!0)};return g?e.jsx("div",{children:"Cargando servicios..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Listado de Servicios"}),e.jsx("button",{onClick:()=>a(),className:"bg-brown-800 hover:bg-brown-900 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"+ Nuevo Servicio"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagen"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TÃ­tulo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CategorÃ­a"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-12 w-16 bg-gray-100 rounded overflow-hidden",children:r.hero_image_url?e.jsx("img",{src:r.hero_image_url,alt:"",className:"h-full w-full object-cover"}):e.jsx("span",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"Sin img"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:r.hero_title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:r.category}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono text-xs",children:r.slug}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>a(r),className:"text-gold-600 hover:text-gold-900 mr-4",children:"Editar"}),e.jsx("button",{onClick:()=>h(r.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},r.id))})]})}),d&&s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>c(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:e.jsxs("form",{onSubmit:t,className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s.id?"Editar Servicio":"Nuevo Servicio"})}),e.jsxs("div",{className:"flex-1 overflow-y-scroll px-6 py-4 min-h-0 overscroll-contain",children:[e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-4",children:["basic","hero","intro","features","process","seo"].map(r=>e.jsx("button",{type:"button",onClick:()=>f(r),className:`${l===r?"border-gold-500 text-gold-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm capitalize`,children:r==="basic"?"BÃ¡sico":r==="seo"?"SEO":r},r))})}),e.jsxs("div",{className:"space-y-6",children:[l==="basic"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"TÃ­tulo (Meta)"}),e.jsx("input",{type:"text",required:!0,value:s.title||"",onChange:r=>o({...s,title:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Slug (URL)"}),e.jsx("input",{type:"text",value:s.slug||"",onChange:r=>o({...s,slug:r.target.value}),placeholder:"auto-generado",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CategorÃ­a"}),e.jsxs("select",{value:s.category||"manicura",onChange:r=>o({...s,category:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm",children:[e.jsx("option",{value:"manicura",children:"Manicura"}),e.jsx("option",{value:"pedicura",children:"Pedicura"}),e.jsx("option",{value:"cejas",children:"Cejas"}),e.jsx("option",{value:"pestanas",children:"PestaÃ±as"}),e.jsx("option",{value:"peluqueria",children:"PeluquerÃ­a"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Precio"}),e.jsx("input",{type:"text",value:s.price||"",onChange:r=>o({...s,price:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DuraciÃ³n"}),e.jsx("input",{type:"text",value:s.duration||"",onChange:r=>o({...s,duration:r.target.value}),placeholder:"ej: 60 min",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]})]}),l==="hero"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"TÃ­tulo Hero"}),e.jsx("input",{type:"text",value:s.hero_title||"",onChange:r=>o({...s,hero_title:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"SubtÃ­tulo Hero"}),e.jsx("input",{type:"text",value:s.hero_subtitle||"",onChange:r=>o({...s,hero_subtitle:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen Hero"}),e.jsx(j,{onUpload:r=>o({...s,hero_image_url:r}),currentImage:s.hero_image_url})]})]}),l==="intro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"TÃ­tulo Intro (Â¿QuÃ© es...?)"}),e.jsx("input",{type:"text",value:s.intro_title||"",onChange:r=>o({...s,intro_title:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DescripciÃ³n Intro"}),e.jsx("textarea",{rows:4,value:s.intro_description||"",onChange:r=>o({...s,intro_description:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]}),l==="features"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"TÃ­tulo SecciÃ³n Features"}),e.jsx("input",{type:"text",value:s.features_title||"",onChange:r=>o({...s,features_title:r.target.value}),placeholder:"ej: Ventajas del...",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen Features"}),e.jsx(j,{onUpload:r=>o({...s,features_image_url:r}),currentImage:s.features_image_url})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Feature 1"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("input",{type:"text",placeholder:"TÃ­tulo",value:s.feature_1_title||"",onChange:r=>o({...s,feature_1_title:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"}),e.jsx("textarea",{rows:2,placeholder:"DescripciÃ³n",value:s.feature_1_description||"",onChange:r=>o({...s,feature_1_description:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Feature 2"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("input",{type:"text",placeholder:"TÃ­tulo",value:s.feature_2_title||"",onChange:r=>o({...s,feature_2_title:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"}),e.jsx("textarea",{rows:2,placeholder:"DescripciÃ³n",value:s.feature_2_description||"",onChange:r=>o({...s,feature_2_description:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Feature 3"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("input",{type:"text",placeholder:"TÃ­tulo",value:s.feature_3_title||"",onChange:r=>o({...s,feature_3_title:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"}),e.jsx("textarea",{rows:2,placeholder:"DescripciÃ³n",value:s.feature_3_description||"",onChange:r=>o({...s,feature_3_description:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]})]}),l==="process"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"TÃ­tulo SecciÃ³n Proceso"}),e.jsx("input",{type:"text",value:s.process_title||"Paso a paso",onChange:r=>o({...s,process_title:r.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Paso 1"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icono SVG"}),e.jsx(v,{onUpload:r=>o({...s,process_step_1_icon:r}),currentSVG:s.process_step_1_icon})]}),e.jsx("input",{type:"text",placeholder:"TÃ­tulo",value:s.process_step_1_title||"",onChange:r=>o({...s,process_step_1_title:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"}),e.jsx("textarea",{rows:2,placeholder:"DescripciÃ³n",value:s.process_step_1_description||"",onChange:r=>o({...s,process_step_1_description:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Paso 2"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icono SVG"}),e.jsx(v,{onUpload:r=>o({...s,process_step_2_icon:r}),currentSVG:s.process_step_2_icon})]}),e.jsx("input",{type:"text",placeholder:"TÃ­tulo",value:s.process_step_2_title||"",onChange:r=>o({...s,process_step_2_title:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"}),e.jsx("textarea",{rows:2,placeholder:"DescripciÃ³n",value:s.process_step_2_description||"",onChange:r=>o({...s,process_step_2_description:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Paso 3"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icono SVG"}),e.jsx(v,{onUpload:r=>o({...s,process_step_3_icon:r}),currentSVG:s.process_step_3_icon})]}),e.jsx("input",{type:"text",placeholder:"TÃ­tulo",value:s.process_step_3_title||"",onChange:r=>o({...s,process_step_3_title:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"}),e.jsx("textarea",{rows:2,placeholder:"DescripciÃ³n",value:s.process_step_3_description||"",onChange:r=>o({...s,process_step_3_description:r.target.value}),className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]})]}),l==="seo"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contenido SEO (Texto final)"}),e.jsx("textarea",{rows:8,value:s.seo_content||"",onChange:r=>o({...s,seo_content:r.target.value}),placeholder:"Texto adicional para SEO que aparecerÃ¡ al final de la pÃ¡gina...",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm font-mono text-xs"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-brown-800 border border-transparent rounded-md hover:bg-brown-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold-500",children:"Guardar"})]})]})})]})]})}function _({value:i,onChange:m}){const[g,u]=n.useState(!1),s=n.useRef(null);n.useEffect(()=>{s.current&&s.current.innerHTML!==i&&(s.current.innerHTML=i)},[i]);const o=()=>{s.current&&m(s.current.innerHTML)},d=(p,y=void 0)=>{document.execCommand(p,!1,y),s.current?.focus()},c=()=>d("bold"),l=()=>d("italic"),f=()=>d("formatBlock","<h2>"),b=()=>d("formatBlock","<h3>"),h=()=>d("formatBlock","<p>"),t=()=>d("insertUnorderedList"),a=()=>d("insertOrderedList"),r=p=>{const y=`<img src="${p}" alt="Imagen" class="w-full rounded-lg my-4" />`;d("insertHTML",y),u(!1)};return e.jsxs("div",{className:"border border-gray-300 rounded-md",children:[e.jsxs("div",{className:"bg-gray-50 border-b border-gray-300 p-2 flex flex-wrap gap-1",children:[e.jsx("button",{type:"button",onClick:c,className:"px-3 py-1 text-sm font-bold bg-white border border-gray-300 rounded hover:bg-gray-100",title:"Negrita",children:"B"}),e.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 text-sm italic bg-white border border-gray-300 rounded hover:bg-gray-100",title:"Cursiva",children:"I"}),e.jsx("div",{className:"w-px bg-gray-300 mx-1"}),e.jsx("button",{type:"button",onClick:f,className:"px-3 py-1 text-sm font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100",title:"TÃ­tulo H2",children:"H2"}),e.jsx("button",{type:"button",onClick:b,className:"px-3 py-1 text-sm font-semibold bg-white border border-gray-300 rounded hover:bg-gray-100",title:"TÃ­tulo H3",children:"H3"}),e.jsx("button",{type:"button",onClick:h,className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100",title:"PÃ¡rrafo",children:"P"}),e.jsx("div",{className:"w-px bg-gray-300 mx-1"}),e.jsx("button",{type:"button",onClick:t,className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100",title:"Lista con viÃ±etas",children:"â€¢ Lista"}),e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100",title:"Lista numerada",children:"1. Lista"}),e.jsx("div",{className:"w-px bg-gray-300 mx-1"}),e.jsx("button",{type:"button",onClick:()=>u(!g),className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100",title:"Insertar imagen",children:"ðŸ–¼ï¸ Imagen"})]}),g&&e.jsxs("div",{className:"bg-blue-50 border-b border-gray-300 p-3",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Sube una imagen para insertarla en el contenido:"}),e.jsx(j,{onUpload:r,currentImage:""})]}),e.jsx("div",{ref:s,contentEditable:!0,onInput:o,className:"w-full p-4 min-h-[400px] max-h-[600px] overflow-y-auto focus:outline-none focus:ring-2 focus:ring-gold-500 prose prose-sm max-w-none",style:{fontSize:"14px",lineHeight:"1.6"}}),e.jsx("div",{className:"bg-gray-50 border-t border-gray-300 p-2 text-xs text-gray-600",children:"ðŸ’¡ Tip: Selecciona texto y haz clic en los botones para aplicar formato. VerÃ¡s el resultado en tiempo real."})]})}function k(){const[i,m]=n.useState([]),[g,u]=n.useState(!0),[s,o]=n.useState(null),[d,c]=n.useState(!1);n.useEffect(()=>{l()},[]),n.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[d]);const l=async()=>{u(!0);const{data:t,error:a}=await x.from("blog_posts").select("*").order("created_at",{ascending:!1});a?console.error("Error fetching posts:",a):m(t||[]),u(!1)},f=async t=>{if(!confirm("Â¿EstÃ¡s seguro de que quieres eliminar este artÃ­culo?"))return;const{error:a}=await x.from("blog_posts").delete().eq("id",t);a?(alert("Error eliminando artÃ­culo"),console.error(a)):l()},b=async t=>{if(t.preventDefault(),!s)return;!s.slug&&s.title&&(s.slug=s.title.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""));let a;if(s.id){const{error:r}=await x.from("blog_posts").update(s).eq("id",s.id);a=r}else{const{error:r}=await x.from("blog_posts").insert([s]);a=r}a?(console.error("Error saving post:",a),alert("Error al guardar: "+a.message)):(c(!1),o(null),l())},h=t=>{o(t?{...t}:{title:"",slug:"",excerpt:"",content:"",image_url:"",category:"Novedades",is_published:!1}),c(!0)};return g?e.jsx("div",{children:"Cargando artÃ­culos..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"GestiÃ³n del Blog"}),e.jsx("button",{onClick:()=>h(),className:"bg-brown-800 hover:bg-brown-900 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"+ Nuevo ArtÃ­culo"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagen"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TÃ­tulo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-12 w-16 bg-gray-100 rounded overflow-hidden",children:t.image_url?e.jsx("img",{src:t.image_url,alt:"",className:"h-full w-full object-cover"}):e.jsx("span",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"Sin img"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.is_published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.is_published?"Publicado":"Borrador"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>h(t),className:"text-gold-600 hover:text-gold-900 mr-4",children:"Editar"}),e.jsx("button",{onClick:()=>f(t.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},t.id))})]})}),d&&s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>c(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:e.jsxs("form",{onSubmit:b,className:"flex flex-col h-full",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s.id?"Editar ArtÃ­culo":"Nuevo ArtÃ­culo"})}),e.jsx("div",{className:"flex-1 overflow-y-scroll px-6 py-4 min-h-0 overscroll-contain",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"TÃ­tulo"}),e.jsx("input",{type:"text",required:!0,value:s.title||"",onChange:t=>o({...s,title:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CategorÃ­a"}),e.jsx("input",{type:"text",value:s.category||"",onChange:t=>o({...s,category:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Slug"}),e.jsx("input",{type:"text",value:s.slug||"",onChange:t=>o({...s,slug:t.target.value}),placeholder:"auto-generado",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-2 flex items-center mt-6",children:[e.jsx("input",{id:"is_published",type:"checkbox",checked:s.is_published||!1,onChange:t=>o({...s,is_published:t.target.checked}),className:"h-4 w-4 text-gold-600 focus:ring-gold-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_published",className:"ml-2 block text-sm text-gray-900",children:"Publicado"})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Extracto (Resumen)"}),e.jsx("textarea",{rows:2,value:s.excerpt||"",onChange:t=>o({...s,excerpt:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contenido"}),e.jsx(_,{value:s.content||"",onChange:t=>o({...s,content:t})})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen Destacada"}),e.jsx(j,{onUpload:t=>o({...s,image_url:t}),currentImage:s.image_url})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-brown-800 border border-transparent rounded-md hover:bg-brown-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold-500",children:"Guardar"})]})]})})]})]})}function C(){const[i,m]=n.useState([]),[g,u]=n.useState(!0),[s,o]=n.useState(null),[d,c]=n.useState(!1);n.useEffect(()=>{l()},[]);const l=async()=>{u(!0);const{data:t,error:a}=await x.from("team_members").select("*").order("display_order",{ascending:!0});a?console.error("Error fetching team:",a):m(t||[]),u(!1)},f=async t=>{if(!confirm("Â¿EstÃ¡s seguro de que quieres eliminar a este miembro del equipo?"))return;const{error:a}=await x.from("team_members").delete().eq("id",t);a?(alert("Error eliminando miembro"),console.error(a)):l()},b=async t=>{if(t.preventDefault(),!s)return;let a;if(s.id){const{error:r}=await x.from("team_members").update(s).eq("id",s.id);a=r}else{const{error:r}=await x.from("team_members").insert([s]);a=r}a?(console.error("Error saving member:",a),alert("Error al guardar: "+a.message)):(c(!1),o(null),l())},h=t=>{o(t?{...t}:{name:"",role:"",image_url:"",bio:"",display_order:0}),c(!0)};return g?e.jsx("div",{children:"Cargando equipo..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"GestiÃ³n del Equipo"}),e.jsx("button",{onClick:()=>h(),className:"bg-brown-800 hover:bg-brown-900 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"+ Nuevo Miembro"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(t=>e.jsxs("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"h-48 overflow-hidden bg-gray-100",children:t.image_url?e.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Sin foto"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-serif font-bold text-lg text-brown-800",children:t.name}),e.jsx("p",{className:"text-sm text-gold-600 font-medium",children:t.role}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>h(t),className:"text-sm text-gray-600 hover:text-brown-800",children:"Editar"}),e.jsx("button",{onClick:()=>f(t.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})]},t.id))}),d&&s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full",children:e.jsxs("form",{onSubmit:b,className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s.id?"Editar Miembro":"Nuevo Miembro"})}),e.jsxs("div",{className:"grid grid-cols-1 gap-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),e.jsx("input",{type:"text",required:!0,value:s.name||"",onChange:t=>o({...s,name:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rol / Puesto"}),e.jsx("input",{type:"text",value:s.role||"",onChange:t=>o({...s,role:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BiografÃ­a"}),e.jsx("textarea",{rows:3,value:s.bio||"",onChange:t=>o({...s,bio:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto de Perfil"}),e.jsx(j,{onUpload:t=>o({...s,image_url:t}),currentImage:s.image_url})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Orden de VisualizaciÃ³n"}),e.jsx("input",{type:"number",value:s.display_order||0,onChange:t=>o({...s,display_order:parseInt(t.target.value)}),className:"mt-1 block w-20 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-gold-500 focus:border-gold-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"mt-8 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-brown-800 text-base font-medium text-white hover:bg-brown-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Guardar"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})})]})})]})}function T(){const[i,m]=n.useState("services"),g=async()=>{await x.auth.signOut(),window.location.href="/admin/login"};return e.jsx(w,{children:e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("nav",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsx("div",{className:"flex",children:e.jsx("div",{className:"flex-shrink-0 flex items-center",children:e.jsx("span",{className:"font-serif text-xl font-bold text-brown-800",children:"Admin Panel"})})}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium",children:"Cerrar SesiÃ³n"})})]})})}),e.jsxs("div",{className:"py-10",children:[e.jsx("header",{children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("h1",{className:"text-3xl font-bold leading-tight text-gray-900 font-serif",children:[i==="services"&&"GestiÃ³n de Servicios",i==="blog"&&"GestiÃ³n del Blog",i==="team"&&"GestiÃ³n del Equipo"]})})}),e.jsx("main",{children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"border-b border-gray-200 mt-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>m("services"),className:`${i==="services"?"border-gold-500 text-gold-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Servicios"}),e.jsx("button",{onClick:()=>m("blog"),className:`${i==="blog"?"border-gold-500 text-gold-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Blog"}),e.jsx("button",{onClick:()=>m("team"),className:`${i==="team"?"border-gold-500 text-gold-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:"Equipo"})]})}),e.jsx("div",{className:"px-4 py-8 sm:px-0",children:e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg divide-y divide-gray-200",children:e.jsxs("div",{className:"p-6",children:[i==="services"&&e.jsx(N,{}),i==="blog"&&e.jsx(k,{}),i==="team"&&e.jsx(C,{})]})})})]})})]})]})})}export{T as default};
